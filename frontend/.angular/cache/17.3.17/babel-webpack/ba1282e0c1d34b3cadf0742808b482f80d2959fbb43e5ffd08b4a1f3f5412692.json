{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nlet AuthService = class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.tokenKey = 'bi_token';\n    this.apiBase = 'http://localhost:3000';\n  }\n  login(email, password) {\n    return this.http.post(`${this.apiBase}/auth/login`, {\n      email,\n      password\n    }).pipe(tap(response => {\n      localStorage.setItem(this.tokenKey, response.access_token);\n    }));\n  }\n  getToken() {\n    return localStorage.getItem(this.tokenKey);\n  }\n  logout() {\n    localStorage.removeItem(this.tokenKey);\n  }\n  signup(payload) {\n    return this.http.post(`${this.apiBase}/auth/signup`, payload).pipe(tap(response => localStorage.setItem(this.tokenKey, response.access_token)));\n  }\n  static {\n    this.ctorParameters = () => [{\n      type: HttpClient\n    }];\n  }\n};\nAuthService = __decorate([Injectable({\n  providedIn: 'root'\n})], AuthService);\nexport { AuthService };","map":{"version":3,"names":["Injectable","HttpClient","tap","AuthService","constructor","http","tokenKey","apiBase","login","email","password","post","pipe","response","localStorage","setItem","access_token","getToken","getItem","logout","removeItem","signup","payload","__decorate","providedIn"],"sources":["C:\\Users\\FARAH\\Desktop\\Pi4eme\\frontend\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthService {\r\n  private tokenKey = 'bi_token';\r\n  private apiBase = 'http://localhost:3000';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  login(email: string, password: string) {\r\n    return this.http\r\n      .post<{ access_token: string }>(`${this.apiBase}/auth/login`, { email, password })\r\n      .pipe(\r\n        tap((response) => {\r\n          localStorage.setItem(this.tokenKey, response.access_token);\r\n        }),\r\n      );\r\n  }\r\n\r\n  getToken() {\r\n    return localStorage.getItem(this.tokenKey);\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem(this.tokenKey);\r\n  }\r\n\r\n  signup(payload: {\r\n    email: string;\r\n    password: string;\r\n    role: 'CompanyOwner' | 'Accountant';\r\n    companyName?: string;\r\n    taxRate?: number;\r\n    currency?: string;\r\n    notificationEmail?: string;\r\n    companyId?: string;\r\n  }) {\r\n    return this.http\r\n      .post<{ access_token: string }>(`${this.apiBase}/auth/signup`, payload)\r\n      .pipe(\r\n        tap((response) => localStorage.setItem(this.tokenKey, response.access_token)),\r\n      );\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,UAAU,QAAQ,eAAe;AAC1C,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,GAAG,QAAQ,gBAAgB;AAG7B,IAAMC,WAAW,GAAjB,MAAMA,WAAW;EAItBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAHhB,KAAAC,QAAQ,GAAG,UAAU;IACrB,KAAAC,OAAO,GAAG,uBAAuB;EAEF;EAEvCC,KAAKA,CAACC,KAAa,EAAEC,QAAgB;IACnC,OAAO,IAAI,CAACL,IAAI,CACbM,IAAI,CAA2B,GAAG,IAAI,CAACJ,OAAO,aAAa,EAAE;MAAEE,KAAK;MAAEC;IAAQ,CAAE,CAAC,CACjFE,IAAI,CACHV,GAAG,CAAEW,QAAQ,IAAI;MACfC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACT,QAAQ,EAAEO,QAAQ,CAACG,YAAY,CAAC;IAC5D,CAAC,CAAC,CACH;EACL;EAEAC,QAAQA,CAAA;IACN,OAAOH,YAAY,CAACI,OAAO,CAAC,IAAI,CAACZ,QAAQ,CAAC;EAC5C;EAEAa,MAAMA,CAAA;IACJL,YAAY,CAACM,UAAU,CAAC,IAAI,CAACd,QAAQ,CAAC;EACxC;EAEAe,MAAMA,CAACC,OASN;IACC,OAAO,IAAI,CAACjB,IAAI,CACbM,IAAI,CAA2B,GAAG,IAAI,CAACJ,OAAO,cAAc,EAAEe,OAAO,CAAC,CACtEV,IAAI,CACHV,GAAG,CAAEW,QAAQ,IAAKC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACT,QAAQ,EAAEO,QAAQ,CAACG,YAAY,CAAC,CAAC,CAC9E;EACL;;;;;;;AAvCWb,WAAW,GAAAoB,UAAA,EADvBvB,UAAU,CAAC;EAAEwB,UAAU,EAAE;AAAM,CAAE,CAAC,C,EACtBrB,WAAW,CAwCvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}